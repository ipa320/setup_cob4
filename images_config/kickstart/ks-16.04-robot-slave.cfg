#Generated by Kickstart Configurator
#platform=AMD64 or Intel EM64T

#System language
lang en_US.UTF-8
#Language modules to install
langsupport de_DE.UTF-8 --default=en_US.UTF-8
#System keyboard
keyboard de
#System mouse
mouse
#System timezone
timezone Europe/Berlin
#Root password
rootpw --iscrypted $1$.8rMo3Kc$hwkXrTTshYmLa9iplJchz.
#Initial user
user robot-local --fullname "robot-local" --iscrypted --password $1$.8rMo3Kc$hwkXrTTshYmLa9iplJchz.
#Reboot after installation
reboot
#Use text mode install
text
#Install OS instead of upgrade
install
#Use CDROM installation media
cdrom
#System bootloader configuration
bootloader --location=mbr
#Clear the Master Boot Record
zerombr yes
#Partition clearing information
#clearpart --all --initlabel
#Disk partitioning information
#part / --fstype ext4 --size 20000 --grow
#part swap --recommended

#System authorization infomation
auth  --useshadow  --enablemd5
#Network information
network --bootproto=dhcp --device=link
#Firewall configuration
firewall --disabled
#Do not configure the X Window System
skipx

################ PACKAGES ################
# Additional packages to install.
%packages
acpi-support
apt-transport-https
bash-completion
bc
ca-certificates
can-utils
curl
build-essential
gitg
git-gui
gnome
htop
ipython
language-pack-de
language-pack-en
libcanberra-gtk-module
libglfw3-dev
meld
nmap
openssh-client
openssh-server
pulseaudio
python-software-properties
software-properties-common
terminator
tmux
tree
vim
zsh

################!! PRE-INSTALLATION !!################
################ Request for hostname ################
%pre --erroronfail --interpreter /bin/bash
#switch to tty1
exec < /dev/tty6 > /dev/tty6 2>&1
chvt 6
echo "########################################"
echo "# Running Pre Configuration for slave #"
echo "########################################"
echo -n "Enter the name of the machine (hostname): "
read hostn
hostname $hostn
echo "You have chosen $hostn. Press enter to continue or Ctrl Alt Del to restart"
read
#Go back to tty1
exec < /dev/tty1 > /dev/tty1
chvt 1
%end

################!! POST-INSTALLATION !!################
################ UPGRADE APT PACKAGES ################
%post --erroronfail --interpreter=/bin/bash
bash /media/cdrom/setup_cob4/images_config/kickstart/kickstart-robot.sh xenial slave 2>&1 | tee /var/log/kickstart.log
%end
